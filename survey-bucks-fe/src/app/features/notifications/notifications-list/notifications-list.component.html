<!-- src/app/features/notifications/notifications-list/notifications-list.component.html -->
<div class="notifications-container">
    <div class="page-header">
      <h1>Notifications</h1>
      <p class="subtitle">Stay updated with your survey activities and rewards</p>
    </div>
    
    <div class="notification-actions">
      <mat-card>
        <mat-card-content>
          <div class="actions-left">
            <span class="notification-count">
              {{unreadCount}} unread notifications
            </span>
          </div>
          
          <div class="actions-right">
            <button mat-button color="primary" (click)="markAllAsRead()" [disabled]="unreadCount === 0">
              <mat-icon>mark_email_read</mat-icon>
              Mark All as Read
            </button>
            
            <button mat-button color="warn" (click)="clearAllNotifications()" [disabled]="notifications.length === 0">
              <mat-icon>delete_sweep</mat-icon>
              Clear All
            </button>
          </div>
        </mat-card-content>
      </mat-card>
    </div>
    
    <div *ngIf="loading" class="loading-container">
      <mat-progress-bar mode="indeterminate"></mat-progress-bar>
      <p>Loading notifications...</p>
    </div>
    
    <div *ngIf="!loading" class="notifications-list">
      <app-empty-state
        *ngIf="notifications.length === 0"
        icon="notifications_off"
        title="No Notifications"
        description="You don't have any notifications at the moment.">
      </app-empty-state>

      <mat-card *ngFor="let notification of notifications" 
               class="notification-card" 
               [ngClass]="{'unread': !notification.isRead}">
        <mat-card-content>
          <div class="notification-icon" [ngClass]="getNotificationTypeClass(notification.notificationTypeName)">
            <mat-icon>{{getNotificationIcon(notification.notificationTypeName)}}</mat-icon>
          </div>
          
          <div class="notification-content">
            <div class="notification-header">
              <h3>{{notification.title}}</h3>
              <span class="notification-time">{{notification.createdDate | date:'medium'}}</span>
            </div>
            
            <p>{{notification.message}}</p>
            
            <div class="notification-footer">
              <div class="notification-metadata">
                <span class="notification-type">{{notification.notificationTypeName}}</span>
                <span *ngIf="!notification.isRead" class="unread-indicator">Unread</span>
              </div>
              
              <div class="notification-actions">
                <a *ngIf="notification.deepLink" 
                   mat-button 
                   color="primary" 
                   [routerLink]="notification.deepLink" 
                   (click)="markAsRead(notification)">
                  View Details
                </a>
                
                <button *ngIf="!notification.isRead" 
                       mat-button 
                       color="primary" 
                       (click)="markAsRead(notification)">
                  Mark as Read
                </button>
              </div>
            </div>
          </div>
          
          <div class="notification-menu">
            <button mat-icon-button [matMenuTriggerFor]="notificationMenu">
              <mat-icon>more_vert</mat-icon>
            </button>
            
            <mat-menu #notificationMenu="matMenu">
              <button *ngIf="!notification.isRead" mat-menu-item (click)="markAsRead(notification)">
                <mat-icon>visibility</mat-icon>
                <span>Mark as Read</span>
              </button>
              
              <button mat-menu-item (click)="deleteNotification(notification)">
                <mat-icon>delete</mat-icon>
                <span>Delete</span>
              </button>
            </mat-menu>
          </div>
        </mat-card-content>
      </mat-card>
    </div>
  </div>
